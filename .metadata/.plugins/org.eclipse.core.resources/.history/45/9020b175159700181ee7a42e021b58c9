package com.cg.ui;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

import com.cg.bean.Employee;
import com.cg.controller.EmployeeController;
import com.cg.service.EmployeeService;

public class UIEmployee {

	Map<String, String> emp;
	EmployeeController ctrl;
	

	public void setSer(EmployeeService ser) {
		this.ser = ser;
	}

	BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

	public void start() throws NumberFormatException, IOException {
		emp = new HashMap<>();
		accept();
	}

	private void accept() throws NumberFormatException, IOException {
		int ch;
		do
		{
			System.out.println("Enter choice\n1.Add New Employee\n2.View all employees\n3.Get employee by id\n4.Delete an employee\nAny other to exit");
			ch=Integer.parseInt(br.readLine());
			switch(ch)
			{
				case 1:System.out.println("Enter the emp name");
					emp.put("id", String.valueOf(Employee.fetchNextID()));
					emp.put("name", br.readLine());
					ser.addEmployee(emp);
					break;
				case 2:viewAll(ser.viewAllEmp());
					break;
				case 3:System.out.println("Enter the emp ID");
				ser.getEmployeeById(Integer.parseInt(br.readLine()));
				break;
				case 4:System.out.println("Enter the emp ID");
				ser.deleteEmployee(Integer.parseInt(br.readLine()));
				break;
				default:System.exit(1);
			}
		
		}while(true);
	}

	private void viewAll(HashMap<Integer, Employee> viewAllEmp) {

		
		Set<Entry<String,String>> set= emp.entrySet();
		
		set.stream().forEach((element)->System.out.println(element.getValue()+" "+element.getKey()));
	}
}
